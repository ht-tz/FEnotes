# 1. 什么是JavaScript

JavaScript is one of the **3 languages** all web developers **must** learn:

- 是一种运行在浏览器上面的语言 ,将网页的交互行为用JS的方式写出来。是一个脚本语言，创建网页的动态内容。

1. [**HTML**](https://www.w3schools.com/html/default.asp) to define the content of web pages

2. [**CSS**](https://www.w3schools.com/css/default.asp) to specify the layout of web pages

3. **JavaScript** to program the behavior of web pages

---

- js的作用

1. 做动态的交互效果
2. 操作html和css
3. 和后台进行数据交互

# 2. 如何引入JS

- 内联(通过标签属性添加js代码)
- 外部引入
- 内部引入(通过在script标签里面写js代码)

1. 内联 JavaScript (Inline JavaScript handlers)
通过标签属性添加js代码

然而请不要这样做。 这将使 JavaScript 污染到 HTML，而且效率低下。对于每个需要应用 JavaScript 的按钮，你都得手动添加 onclick="createParagraph()" 属性。

```js
function createParagraph() {
  const para = document.createElement('p');
  para.textContent = '你点击了这个按钮！';
  document.body.appendChild(para);
}
```

```html
<button title="aaa" onclick="alert('你干嘛点我！')">点击</button>
```
2. 内部 JavaScript(Internal JavaScript)
通过在script标签里面写js代码

```html
<h2>JavaScript in Body</h2>

<p id="demo"></p>

<script>
document.getElementById("demo").innerHTML = "My First JavaScript";
</script>
```
3. 外部文件的方式(External JavaScript)

```html
//<script src="文件地址"></script>
<!DOCTYPE html>
<html>
<body>

<h2>External JavaScript</h2>

<p id="demo">A Paragraph.</p>

<button type="button" onclick="myFunction()">Try it</button>

<p>(myFunction is stored in an external file called "myScript.js")</p>

<script src="myScript.js"></script>

</body>
</html>
```

4. `<a href=""></a>` href 里面写js代码

```html
<!--默认刷新页面-->
<a href=""></a> 

<!--不刷新页面，但是跳转到页面的顶部-->
<a href="#"></a>

<!--不实现任何功能-->
<a href="javascript:;"></a>

<!--正常使用-->
<a href="https://www.w3schools.com">Visit W3Schools.com!</a>
<a href="javascript:alert('Hello World!');">Execute JavaScript</a>
    
```

# 4. Event

<mark>表格内容所列事件在使用的时候需要加on,事件监听使用的时候不需要加on</mark>

[Chapter 13: EVENT](/Users/xusumu/OneDrive/1.notes/2.FE/Javascript/jsprofessional-wrox.md)

[chapter 13. [重点] 事件和回调](/Users/xusumu/OneDrive/1.notes/2.FE/2.thoughtworks/JS/JavaScript-thoughtworks.md)

## 事件类型

标签都可以加事件，一个标签可以加多个事件，想操作谁就给谁加事件 
### 常见的事件的列表
| 常见的事件的列表 | Description                                                  |
| :--------------- | :----------------------------------------------------------- |
| onchange         | An HTML element has been changed                             |
| onclick          | The user clicks an HTML element                              |
| onload           | The browser has finished loading the page                    |
| onscroll         |                                                              |
| ondblclick       |                                                              |
| onsubmit         |                                                              |
| onmouseover      | 高频触发的时候  事件里面不要写逻辑复杂的代码                 |
| onmouseout       | The user moves the mouse away from an HTML element           |
| onmousedown      |                                                              |
| onmouseup        |                                                              |
| oncontextmenu    | 鼠标右键                                                     |
| onmousemove      |                                                              |
| onmouseenter     | 鼠标移入,没有事件冒泡                                        |
| onmouseleave     | 鼠标移出,没有事件冒泡                                        |
| onkeydown        | 当键盘按下的时候,如果是在输入框中，按下触发的时候，输入的内容还没有进输入框,一直按的时候down执行多次，up执行一次 |
| onkeypress       | 如果是在输入框中，按下触发的时候，输入的内容还没有进输入框,键码区分大小写,输入框能出来的都能用，不能出来的基本不能用 |
| onkeyup          | 当键盘抬起的时候                                             |
| oninput          | 当输入的时候,只支持高级浏览器                                |
| onpropertychange | 当输入的时候,IE浏览器事件 并且这个事件有bug在ie9里面删除失效 |
| onblur           |                                                              |
| onfocus          |                                                              |
| window.onresize  |                                                              |

### Event itself

| Property/Method                                              | Description                                                  |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [bubbles](https://www.w3schools.com/jsref/event_bubbles.asp) | Returns whether or not a specific event is a bubbling event  |
| [cancelBubble](https://www.w3schools.com/jsref/event_cancelbubble.asp) | Sets or returns whether the event should propagate up the hierarchy or not |
| [currentTarget](https://www.w3schools.com/jsref/event_currenttarget.asp) | Returns the element whose event listeners triggered the event |
| [target](https://www.w3schools.com/jsref/event_target.asp)   | Returns the element that triggered the event                 |
| [type](https://www.w3schools.com/jsref/event_type.asp)       | Returns the name of the event                                |
| [preventDefault()](https://www.w3schools.com/jsref/event_preventdefault.asp) | Cancels the event if it is cancelable, meaning that the default action that belongs to the event will not occur |

### 用户界面事件(UI)

| 用户界面事件 | 描述                                                         |
| ------------ | ------------------------------------------------------------ |
| onload       | window 上当页面加载完成后触发，在窗套（<frameset>）上当所有窗格（<frame>）都加载完成后触发，在<img>元素上当图片加载完成后触发，在<object>元素上当相应对象加载完成后触发。 |
| unload       | 在 window 上当页面完全卸载后触发，在窗套上当所有窗格都卸载完成后触发，在<br/><object>元素上当相应对象卸载完成后触发。 |
| onselect     | 载完成后触发。在文本框（<input>或 textarea）上当用户选择了一个或多个字符时触发。 |
| onresize     | window 或窗格上当窗口或窗格被缩放时触发。                    |
| onscroll     | 当用户滚动包含滚动条的元素时在元素上触发。                   |

| Event                                                        | Description                                                  |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [abort](https://www.w3schools.com/jsref/event_onabort_media.asp) | The event occurs when the loading of a media is aborted      |
| [beforeunload](https://www.w3schools.com/jsref/event_onbeforeunload.asp) | The event occurs before the document is about to be unloaded |
| [error](https://www.w3schools.com/jsref/event_onerror.asp)   | The event occurs when an error occurred during the loading of a media file |
| [load](https://www.w3schools.com/jsref/event_onload.asp)     | The event occurs when an object has loaded                   |
| [resize](https://www.w3schools.com/jsref/event_onresize.asp) | The event occurs when the document view is resized           |
| [scroll](https://www.w3schools.com/jsref/event_onscroll.asp) | The event occurs when an element's scrollbar is being scrolled |
| [select](https://www.w3schools.com/jsref/event_onselect.asp) | The event occurs after the user selects some text (for <input> and <textarea>) |
| [unload](https://www.w3schools.com/jsref/event_onunload.asp) | The event occurs once a page has unloaded (for <body>)       |

### 鼠标事件

Here is a list of some common HTML events:

| Event                                                        | Description                                                  |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [onclick](https://www.w3schools.com/jsref/event_onclick.asp) | The event occurs when the user clicks on an element          |
| [oncontextmenu](https://www.w3schools.com/jsref/event_oncontextmenu.asp) | The event occurs when the user right-clicks on an element to open a context menu |
| [ondblclick](https://www.w3schools.com/jsref/event_ondblclick.asp) | The event occurs when the user double-clicks on an element   |
| [onmousedown](https://www.w3schools.com/jsref/event_onmousedown.asp) | The event occurs when the user presses a mouse button over an element |
| [onmouseenter](https://www.w3schools.com/jsref/event_onmouseenter.asp) | The event occurs when the pointer is moved onto an element   |
| [onmouseleave](https://www.w3schools.com/jsref/event_onmouseleave.asp) | The event occurs when the pointer is moved out of an element |
| [onmousemove](https://www.w3schools.com/jsref/event_onmousemove.asp) | The event occurs when the pointer is moving while it is over an element |
| [onmouseout](https://www.w3schools.com/jsref/event_onmouseout.asp) | The event occurs when a user moves the mouse pointer out of an element, or out of one of its children |
| [onmouseover](https://www.w3schools.com/jsref/event_onmouseover.asp) | The event occurs when the pointer is moved onto an element, or onto one of its children |
| [onmouseup](https://www.w3schools.com/jsref/event_onmouseup.asp) | The event occurs when a user releases a mouse button over an element |

#### The MouseEvent Object

Events that occur when the mouse interacts with the HTML document belongs to the MouseEvent Object.

| Property/Method                                              | Description                                                  |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [altKey](https://www.w3schools.com/jsref/event_altkey.asp)   | Returns whether the "ALT" key was pressed when the mouse event was triggered |
| [button](https://www.w3schools.com/jsref/event_button.asp)   | Returns which mouse button was pressed when the mouse event was triggered |
| [buttons](https://www.w3schools.com/jsref/event_buttons.asp) | Returns which mouse buttons were pressed when the mouse event was triggered |
| [clientX](https://www.w3schools.com/jsref/event_clientx.asp) | Returns the horizontal coordinate of the mouse pointer, relative to the current window, when the mouse event was triggered |
| [clientY](https://www.w3schools.com/jsref/event_clienty.asp) | Returns the vertical coordinate of the mouse pointer, relative to the current window, when the mouse event was triggered |
| [ctrlKey](https://www.w3schools.com/jsref/event_ctrlkey.asp) | Returns whether the "CTRL" key was pressed when the mouse event was triggered |
| [getModifierState()](https://www.w3schools.com/jsref/event_mouse_getmodifierstate.asp) | Returns true if the specified key is activated               |
| [metaKey](https://www.w3schools.com/jsref/event_metakey.asp) | Returns whether the "META" key was pressed when an event was triggered |
| movementX                                                    | Returns the horizontal coordinate of the mouse pointer relative to the position of the last mousemove event |
| movementY                                                    | Returns the vertical coordinate of the mouse pointer relative to the position of the last mousemove event |
| [offsetX](https://www.w3schools.com/jsref/event_offsetx.asp) | Returns the horizontal coordinate of the mouse pointer relative to the position of the edge of the target element |
| [offsetY](https://www.w3schools.com/jsref/event_offsety.asp) | Returns the vertical coordinate of the mouse pointer relative to the position of the edge of the target element |
| [pageX](https://www.w3schools.com/jsref/event_pagex.asp)     | Returns the horizontal coordinate of the mouse pointer, relative to the document, when the mouse event was triggered |
| [pageY](https://www.w3schools.com/jsref/event_pagey.asp)     | Returns the vertical coordinate of the mouse pointer, relative to the document, when the mouse event was triggered |
| region                                                       |                                                              |
| [relatedTarget](https://www.w3schools.com/jsref/event_relatedtarget.asp) | Returns the element related to the element that triggered the mouse event |
| [screenX](https://www.w3schools.com/jsref/event_screenx.asp) | Returns the horizontal coordinate of the mouse pointer, relative to the screen, when an event was triggered |
| [screenY](https://www.w3schools.com/jsref/event_screeny.asp) | Returns the vertical coordinate of the mouse pointer, relative to the screen, when an event was triggered |
| [shiftKey](https://www.w3schools.com/jsref/event_shiftkey.asp) | Returns whether the "SHIFT" key was pressed when an event was triggered |
| [which](https://www.w3schools.com/jsref/event_which.asp)     | Returns which mouse button was pressed when the mouse event was triggered |
#### event.pageX clientX offsetX

[视口的宽高与滚动高度](#21. 视口的宽高与滚动高度)

Here's a picture explaining the difference between `pageY` and `clientY`.

pageX：输出当鼠标按钮被点击的元件上的鼠标指针的坐标，获取到的是触发点相对文档区域左上角距离，会随着页面滚动而改变

![](https://i.stack.imgur.com/4C3no.png)

[clientx,y pagex,y sample](https://jsbin.com/oRIDUXE/1/edit?html,output)

event.offsetX ：当鼠标事件发生时，鼠标相对于事件源x轴的位置

event.offsetY：当鼠标事件发生时，鼠标相对于事件源y轴的位置

[offsetx,offsety sample](https://www.w3schools.com/jsref/tryit.asp?filename=tryjsref_event_mouse_offsety)

[offsetx offsety sample2](https://blog.csdn.net/u014205965/article/details/45606797)


### 键盘事件 KeyboardEvent

| Property/Method                                              | Description                                                  |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [altKey](https://www.w3schools.com/jsref/event_key_altkey.asp) | Returns whether the "ALT" key was pressed when the key event was triggered |
| [keyCode](https://www.w3schools.com/jsref/event_key_keycode.asp) | Returns the Unicode character code of the key that triggered the onkeypress event, or the Unicode key code of the key that triggered the onkeydown or onkeyup event |

| Event                                                        | Description                                      |
| :----------------------------------------------------------- | :----------------------------------------------- |
| [onkeydown](https://www.w3schools.com/jsref/event_onkeydown.asp) | The event occurs when the user is pressing a key |
| [onkeypress](https://www.w3schools.com/jsref/event_onkeypress.asp) | The event occurs when the user presses a key     |
| [onkeyup](https://www.w3schools.com/jsref/event_onkeyup.asp) | The event occurs when the user releases a key    |

| keyCode Name | keyCode Number                                |
| :----------- | --------------------------------------------- |
| a/A          | 65                                            |
| 0            | 48                                            |
| 0(九键数字)  | 96                                            |
| Left         | 37                                            |
| top          | 38                                            |
| right        | 39                                            |
| Bottom       | 40                                            |
| space        | 32                                            |
| Backspace    | 8                                             |
| enter        | 13                                            |
| Shift        | 16                                            |
| Ctrl         | 17                                            |
| Alt          | 18                                            |
| shiftkey     | keyCode默认只能操作一个，组件键要配合此键使用 |
| altkey       | keyCode默认只能操作一个，组件键要配合此键使用 |
| ctrlkey      | keyCode默认只能操作一个，组件键要配合此键使用 |

```js
//keyCode默认只能操作一个，组件键要配合shiftKey，altKey，ctrlKey使用
document.onkeydown = function () {
  if (event.ctrlKey && event.keyCode == 67) {
    event.preventDefault();
  }
};
```

```js
//键盘添加
oInp.onkeyup = function () {
  if (event.keyCode == 13) {
    add();
  }
}; //删除

oUl.onclick = function () {
  if (event.target.tagName == "A") {
    oUl.removeChild(event.target.parentNode);
  }
};
```

```js
var oInp = document.querySelector("input");

oInp.onkeydown = function () {
  //alert(1);
  console.log(event.keyCode);

  if (event.ctrlKey && event.keyCode == 65) {
    alert(1);
  }
};

oInp.onkeyup = function () {
  //alert(2);
  //console.log(2);
};
```

```js
var oInp = document.querySelector("input");
var oSpan = document.querySelector("span");

oInp.oninput = function () {
  var str = this.value;
  oSpan.innerHTML = str.length;
}; 
// oInp.onpropertychange=function(){
//     var str=this.value;
//     oSpan.innerHTML=str.length;
// }
```

```js
//down press up 的区别
var oInp = document.querySelector("#inp1");

oInp.onkeydown = function () {
  console.log("down", this.value, event.keyCode);
};

oInp.onkeyup = function () {
  console.log("up", this.value, event.keyCode);
};

oInp.onkeypress = function () {
  console.log("press", this.value, event.keyCode);
};
```

The list is much longer: [W3Schools JavaScript Reference HTML DOM Events](https://www.w3schools.com/jsref/dom_obj_event.asp).

### 剪贴板事件 ClipboardEvent

| Event                                                        | Description                                                  |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [oncopy](https://www.w3schools.com/jsref/event_oncopy.asp)   | The event occurs when the user copies the content of an element |
| [oncut](https://www.w3schools.com/jsref/event_oncut.asp)     | The event occurs when the user cuts the content of an element |
| [onpaste](https://www.w3schools.com/jsref/event_onpaste.asp) | The event occurs when the user pastes some content in an element |

### 拖拽事件 DragEvent

[DragEvent](https://www.w3schools.com/jsref/obj_dragevent.asp)

### 焦点事件 FocusEvent

[FocusEvent Object](https://www.w3schools.com/jsref/obj_focusevent.asp)

| Event                                                        | Description                                             |
| :----------------------------------------------------------- | :------------------------------------------------------ |
| [onblur](https://www.w3schools.com/jsref/event_onblur.asp)   | The event occurs when an element loses focus            |
| [onfocus](https://www.w3schools.com/jsref/event_onfocus.asp) | The event occurs when an element gets focus             |
| [onfocusin](https://www.w3schools.com/jsref/event_onfocusin.asp) | The event occurs when an element is about to get focus  |
| [onfocusout](https://www.w3schools.com/jsref/event_onfocusout.asp) | The event occurs when an element is about to lose focus |

### 输入事件 InputEvent

| Event                                                        | Description                                      |
| :----------------------------------------------------------- | :----------------------------------------------- |
| [oninput](https://www.w3schools.com/jsref/event_oninput.asp) | The event occurs when an element gets user input |

| Property/Method                                              | Description                     |
| :----------------------------------------------------------- | :------------------------------ |
| [data](https://www.w3schools.com/jsref/event_inputevent_data.asp) | Returns the inserted characters |

### 过渡事件 TransitionEvent

| Property/Method                                              | Description                                                 |
| :----------------------------------------------------------- | :---------------------------------------------------------- |
| [propertyName](https://www.w3schools.com/jsref/event_transition_propertyname.asp) | Returns the name of the transition                          |
| [elapsedTime](https://www.w3schools.com/jsref/event_transition_elapsedtime.asp) | Returns the number of seconds a transition has been running |
| pseudoElement                                                | Returns the name of the pseudo-element of the transition    |

| Event                                                        | Description                                          |
| :----------------------------------------------------------- | :--------------------------------------------------- |
| [transitionend](https://www.w3schools.com/jsref/event_transitionend.asp) | The event occurs when a CSS transition has completed |

## 事件解除的方式

`<div onclick="xxx"></div>`  html事件添加操作

1. oDiv.onclick=function(){}  DOM0级事件操作

- 解除：oDiv.onclick=null;

2. 元素.addEventListener

- 解除:  元素.removeEventListener('不加on的事件名',函数名,false)

3. 元素.attachEvent

- 解除:  元素.detachEvent('加on的事件名',函数名)

4.  event.preventDefault()
5. event.cancelBubble=true; 阻止冒泡，全部都兼容
6. event.stopPropagation()，高级浏览器
7. return false

## 事件冒泡

- 事件流：事件在触发的时候，先后执行的顺序，事件触发的流程。叫做事件流

- 事件流分类：事件流分为两种 事件冒泡  事件捕获（事件下沉）
  - 事件冒泡：当前元素先触发事件，事件触发完毕后，向上传播。父级有相同事件，执行，没有相同事件，继续向上传播,一直到document    IE
  - 事件下沉：先document执行，执行后，向下传播。遇到相同的事件执行，没有相同的事件，继续传播。直到触发事件的元素 

## 事件委托

[事件委托](/Users/xusumu/OneDrive/1.notes/2.FE/Javascript/jsprofessional-wrox.md)

`event.target `属性可以用来实现**事件委托** (**event delegation**),在该模型中，事件对象有一个 `srcElement` 属性，等价于`target` 属性。

1. 给未来的，现在不存在的元素加事件
2. 给多个元素加相同事件的性能问题

## 移除事件处理程序

[移除事件处理程序](/Users/xusumu/OneDrive/1.notes/2.FE/Javascript/jsprofessional-wrox.md)

# 5. Function

## what is function

A JavaScript function is a block of code designed to perform a particular task.

A JavaScript function is executed when "something" invokes it (calls it).

就是放代码的一个容器，为了重复、或者在特定的情况下使用

Function **parameters** are listed inside the parentheses () in the function definition.实际参数

Function **arguments** are the **values** received by the function when it is invoked.形式参数

Inside the function, the arguments (the parameters) behave as local variables.
## Function syntax

```js
//命名函数 Function Declarations 函数声明

function name(parameter1, parameter2, parameter3) {
  // code to be executed
}

//函数表达式 Function Expressions
var x = function (a, b) {return a * b};
```
## Function Return

<mark>When JavaScript reaches a `return` statement, the function will stop executing.</mark>

If the function was invoked from a statement, JavaScript will "return" to execute the code after the invoking statement.

Functions often compute a **return value**. The return value is "returned" back to the "caller":

```js
var x = myFunction(4, 3);   // Function is called, return value will end up in x

function myFunction(a, b) {
  return a * b;             // Function returns the product of a and b
}
```

## The () Operator Invokes the Function

Using the example above, `toCelsius` refers to the function object, and `toCelsius()` refers to the function result.

Accessing a function without () will return the function object instead of the function result.

```js
function toCelsius(fahrenheit) {
  return (5/9) * (fahrenheit-32);
}

document.getElementById("demo").innerHTML = toCelsius;

//Accessing a function without () will return the function definition instead of the function result:

document.getElementById("demo").innerHTML = toCelsius();
//-13.333333333333334
```

## 事件函数

setInterval(function(){})

oDiv.onclick=function(){}

## 匿名执行函数

立即调用函数表达式 

**IIFE**，**Immediately Invoked Function Expression**，**Self-Invoking Functions**

Note that the function has no name and is not stored in a variable

You have to add parentheses around the function to indicate that it is a function expression:

```js
//an anonymous self-invoking function 

(function () {
  var x = "Hello!!";  // I will invoke myself
})();

//
~function () {
  var x = "Hello!!";  // I will invoke myself
}

//
+function () {
  var x = "Hello!!";  // I will invoke myself
}

!function () {
  var x = "Hello!!";  // I will invoke myself
}

-function () {
  var x = "Hello!!";  // I will invoke myself
}

```

## arguments object

[w3c arguments object](https://www.w3schools.com/js/js_function_parameters.asp)

an arguments object that can be accessed while inside a function to retrieve the values of each argument that was passed in.类数组，但也不是数组，因为有length property 实参的集合

-  arguments object acts like an array (though it isn’t an instance of Array) 
-  can access each argument using bracket notation (the first argument is arguments[0])

```js
x = findMax(1, 123, 500, 115, 44, 88);

function findMax() {
  var i;
  var max = -Infinity;
  for (i = 0; i < arguments.length; i++) {
    if (arguments[i] > max) {
      max = arguments[i];
    }
  }
  return max;
}
```

```javascript
function sayHi() {
    alert(“Hello “ + arguments[0] + “, “ + arguments[1]);
}

function printAll(){
  for(let i = 0 ; i<arguments.length;i++){
console.log(arguments[i]);
  }
}

printAll(1,2,3,4,5);
```

###  length property

be used to check the number of arguments passed into the function 

```javascript
function howManyArgs() {
 alert(arguments.length);
}
howManyArgs(“string”, 45); //2
howManyArgs(); //0
howManyArgs(12); //1
```

arguments object can be used  in conjunction with named arguments

```javascript
function doAdd(num1, num2) {
 if(arguments.length == 1) {
 alert(num1 + 10);
 } else if (arguments.length == 2) {
 alert(arguments[0] + num2);
 }
}
```

Another thing to keep in mind: if only one argument is passed in, then setting arguments[1] to a value will not be refl ected by the named argument. 

Any named argument that is not passed into the function is automatically assigned the value undefined

<mark>Strict mode makes several changes to how the arguments object can be used.p82</mark>

# 6. Variables

JavaScript variables are containers for storing data values.变量是存放数据或者值的容器

```js
var x = 5;
var y = 6;
var z = x + y;
```

## JavaScript Identifiers

All JavaScript **variables** must be **identified** with **unique names**.

These unique names are called **identifiers**.

Identifiers can be short names (like x and y) or more descriptive names (age, sum, totalVolume).

The general rules for constructing names for variables (unique identifiers) are:

- Names can contain letters, digits, underscores, and dollar signs.
- Names must begin with a letter
- Names can also begin with $ and _ (but we will not use it in this tutorial)
- Names are case sensitive (y and Y are different variables)
- Reserved words (like JavaScript keywords) cannot be used as names(不能用（关键字、保留字）)
- js里面多个单词必须按照驼峰命名法/匈牙利命名法  第一个单词首字母小写后面每个首字母大写

## var can redeclaring

```js
var carName = "Volvo";
var carName;
```

## One Statement, Many Variables

```js
var person = "John Doe",
carName = "Volvo",
price = 200;
```

# 7. JavaScript Output

- Writing into an HTML element, using `innerHTML`.
- Writing into the HTML output using `document.write()`.
- Writing into an alert box, using `window.alert()`.
- Writing into the browser console, using `console.log()`.

1. Using innerHTML

<mark>document.getElementById('id名字')</mark>

```html
<!DOCTYPE html>
<html>
<body>

<h1>My First Web Page</h1>
<p>My First Paragraph</p>

<p id="demo"></p>

<script>
document.getElementById("demo").innerHTML = 5 + 6;
</script>

</body>
</html>
```

2. Using document.write()

```html
<!DOCTYPE html>
<html>
<body>

<h1>My First Web Page</h1>
<p>My first paragraph.</p>

<script>
document.write(5 + 6);
</script>

</body>
</html>
```

Using document.write() after an HTML document is loaded, will **delete all existing HTML**:

The document.write() method should only be used for testing.

```html
<!DOCTYPE html>
<html>
<body>

<h1>My First Web Page</h1>
<p>My first paragraph.</p>

<button type="button" onclick="document.write(5 + 6)">Try it</button>

</body>
</html>
```

3. Using window.alert(),prompt(),confirm()

You can skip the `window` keyword.

```html
<!DOCTYPE html>
<html>
<body>

<h1>My First Web Page</h1>
<p>My first paragraph.</p>

<script>
alert(5 + 6);
</script>

</body>
</html>
```

4. Using console.log()

```html
<!DOCTYPE html>
<html>
<body>

<script>
console.log(5 + 6);
</script>

</body>
</html>
```

5. JavaScript Print(打印)

```html
<!DOCTYPE html>
<html>
<body>

<button onclick="window.print()">Print this page</button>

</body>
</html>
```

# 8. js comments

1. 单行注释  // xxxx

2. 多行注释  /* xxxx */

# 9. JavaScript HTML DOM Document

## Changing CSS
元素.style.xxx='xxx';  相当于给元素的行间加上style属性

### Changing HTML Style

重新赋值的时候注意选择器的优先级，有时候优先级会限制样式的修改

`document.getElementById(id).style.property = new style`

```html
<html>
<body>

<p id="p2">Hello World!</p>

<script>
document.getElementById("p2").style.color = "blue";
</script>

<p>The paragraph above was changed by a script.</p>

</body>
</html>
```

### Using Events

```html
<!DOCTYPE html>
<html>
<body>

<h1 id="id1">My Heading 1</h1>

<button type="button"
onclick="document.getElementById('id1').style.color = 'red'">
Click Me!</button>

</body>
</html>
```

```js
//添加classname

.red{
color:red;
}

var y = document.getElementById("myDIV").className = 'red';
```

### Using Class

HTMLElementObject.className = class

```js
var x = document.getElementsByClassName("mystyle")[0].className;
var y = document.getElementById("myDIV").className;
```

```
//添加classname

.red{
color:red;
}

var y = document.getElementById("myDIV").className = 'red';
```

[classList MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/classList)

```
classList.add()
classList.remove()
```

## Changing HTML

### Changing HTML Content

`document.getElementById(id).innerHTML = new HTML`

```html
<html>
<body>

<p id="p1">Hello World!</p>

<script>
document.getElementById("p1").innerHTML = "New text!";
</script>

</body>
</html>
```

### Changing the Value of an Attribute

<mark>操作属性不要混着用</mark>

1. `document.getElementById(id).attribute = new value`

2. `getAttribute('属性名')`

   `setAttribute('属性名','属性值')`

   `removeAttribute('属性名')`

3. data-set,.dataset.xxx,.dataset.xxx=xxx;

4. 针对对象：通过中括号[],或.获得属性或修改属性值，元素.属性名 , 元素['属性名'],获取出来的属性值都是字符串

```html
<!DOCTYPE html>
<html>
<body>

<img id="myImage" src="smiley.gif">

<script>
document.getElementById("myImage").src = "landscape.jpg";
</script>

</body>
</html>
```

```html
<!--平时都用.遇到要放变量的时候采用[]-->
<script>
        function show(){
            var a='value';
            document.getElementById('inp1')[a]='aaaaa';
        }
</script>

<body>
    <button onclick="show()">点击</button>
    <input id="inp1" type="text">
</body>
```

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div index="1">aaaaaaaaaaa</div>
  </body>
</html>
<script>
  // var oDiv=document.querySelector('div');
  // oDiv.setAttribute('web258','aaa')
  // oDiv.removeAttribute('web258')
  // alert(oDiv.getAttribute('index'))
  // alert(oDiv.getAttribute('web258'))

  var oDiv = document.querySelector("div");
  oDiv.setAttribute("web258", "aaa");
  //oDiv.removeAttribute('web258')
  console.log(oDiv.getAttribute("index"));
  console.log(oDiv.getAttribute("web258"));
</script>


```

## Getting value

### getting css value

`getComputedStyle(元素).样式` :兼容高级浏览器 现代浏览器
`元素.currentStyle.样式`:兼容ie浏览器

```js
function getStyle(obj, sName) {
  if (obj.currentStyle) {
    return obj.currentStyle[sName];
  } else {
    return getComputedStyle(obj)[sName];
  }
}

getStyle(oDiv, "width");
```

```html
<!DOCTYPE html>
<html>
<body>

<p>Click the button to get the computed background color for the test div.</p>
<p><button onclick="myFunction()">Try it</button></p>
<div id="test" style="height: 50px;background-color: lightblue;">Test Div</div>
<p>The computed background color for the test div is: <span id="demo"></span></p>

<script>
function myFunction(){
  var elem = document.getElementById("test");
  var theCSSprop = window.getComputedStyle(elem, null).getPropertyValue("background-color");
  document.getElementById("demo").innerHTML = theCSSprop;
}
</script>

</body>
</html>

```



### getting document value

innerHTML设置或获取位于对象起始和结束标签内的 HTML
outerHTML设置或获取对象及其内容的 HTML 形式
innerText  设置或获取位于对象起始和结束标签内的文本
outerText  设置(包括标签)或获取(不包括标签)对象的文本

```html
<div id="test1">这是div中的文字<span>这是span中的文字</span></div>

<script>
console.log('innerHTML:'+test1.innerHTML);
console.log('outerHTML:'+test1.outerHTML);
console.log('innerText:'+test1.innerText);
console.log('outerText:'+test1.outerText);
  
// "innerHTML:这是div中的文字<span>这是span中的文字</span>"
// "outerHTML:<div id='test1'>这是div中的文字<span>这是span中的文字</span></div>"
// "innerText:这是div中的文字这是span中的文字"
// "outerText:这是div中的文字这是span中的文字"

</script>
```

html document.documentElement
body document.body

新增一个节点
    innerHTML  

document.createElement('标签的名称') 
    创建标签必须是document才有权限 

插入标签
    父节点.appendChild(子节点)  向父级的最后插入一个元素
    父节点.insertBefore(把谁,插到谁前) 
        如果第二个参数是null或者undefined，那么会默认执行appendChild
删除节点
    父级.removeChild(子节点)
替换节点
    父级.replaceChild(新节点，旧节点)

# 10. Operators(表达式与运算符)

[Operators](/Users/xusumu/OneDrive/1.notes/2.FE/Javascript/jsprofessional-wrox.md)

### Arithmetic Operators

| Operator | Description                                                  |
| :------- | :----------------------------------------------------------- |
| +        | Addition                                                     |
| -        | Subtraction                                                  |
| *        | Multiplication                                               |
| **       | Exponentiation ([ES2016](https://www.w3schools.com/js/js_es6.asp)) |
| /        | Division                                                     |
| %        | Modulus (Division Remainder)                                 |
| ++       | Increment                                                    |
| --       | Decrement                                                    |

### Assignment Operators


| Operator | Example | Same As    |
| :------- | :------ | :--------- |
| =        | x = y   | x = y      |
| +=       | x += y  | x = x + y  |
| -=       | x -= y  | x = x - y  |
| *=       | x *= y  | x = x * y  |
| /=       | x /= y  | x = x / y  |
| %=       | x %= y  | x = x % y  |
| **=      | x **= y | x = x ** y |

### Comparison Operators

| Operator | Description                       |
| :------- | :-------------------------------- |
| ==       | equal to                          |
| ===      | equal value and equal type        |
| !=       | not equal                         |
| !==      | not equal value or not equal type |
| >        | greater than                      |
| <        | less than                         |
| >=       | greater than or equal to          |
| <=       | less than or equal to             |
| ?        | ternary operator                  |

### Logical Operators

| Operator | Description |
| :------- | :---------- |
| &&       | logical and |
| \|\|     | logical or  |
| !        | logical not |

### Type Operators

| Operator   | Description                                                |
| :--------- | :--------------------------------------------------------- |
| typeof     | Returns the type of a variable                             |
| instanceof | Returns true if an object is an instance of an object type |

### Bitwise Operators

| Operator | Description           | Example | Same as      | Result | Decimal |
| :------- | :-------------------- | :------ | :----------- | :----- | :------ |
| &        | AND                   | 5 & 1   | 0101 & 0001  | 0001   | 1       |
| \|       | OR                    | 5 \| 1  | 0101 \| 0001 | 0101   | 5       |
| ~        | NOT                   | ~ 5     | ~0101        | 1010   | 10      |
| ^        | XOR                   | 5 ^ 1   | 0101 ^ 0001  | 0100   | 4       |
| <<       | Zero fill left shift  | 5 << 1  | 0101 << 1    | 1010   | 10      |
| >>       | Signed right shift    | 5 >> 1  | 0101 >> 1    | 0010   | 2       |
| >>>      | Zero fill right shift | 5 >>> 1 | 0101 >>> 1   | 0010   | 2       |

# 11. Conditional Statements

## if else and else if

[if else and else if](https://www.w3schools.com/js/js_if_else.asp)

# 12. data type

在 JavaScript 规范中，共定义了七种数据类型，分为 “基本类型” 和 “引用类型” 两大类，如下所示：

- 基本类型：String、Number、Boolean、Symbol、Undefined、Null
- 引用类型：Object

[Data Type](/Users/xusumu/OneDrive/1.notes/2.FE/Javascript/jsprofessional-wrox.md)

[数据类型](/Users/xusumu/OneDrive/1.notes/2.FE/2.thoughtworks/JS/JavaScript-thoughtworks.md)

[w3c data types](https://www.w3schools.com/js/js_datatypes.asp)

# 13. js代码读取顺序总结

- 代码默认从上到下，从左到右
- 遇到=号先看=号右边的     var a=1+1;

-  遇到函数的定义，先不看函数里面的东西，函数调用的时候才看
- 遇到()  先执行()里面的    alert(show())
- 遇到return 先看return 右边的    return  1+1

# 14. true & false 

false  0  null  NaN undefined  '' (空字符串) -> all false

可用Boolean(text),测试真假值

# 15. Function Scope

## 作用域链

## Execution content and scope

全局执行环境是最外围的执行环境，宿主不同，表示的执行环境的对象也不一样。web中，global context是windows object,When an execution context has executed all of its code, it is destroyed销毁, taking with it all of the variables and functions defined within it

内部环境可以通过作用域链访问所有的外部环境，但外部环境不能访问内部环境中的任何变量和函数。

当代码在一个环境中执行时候，会创建变量对象的一个作用域链。作用域链的作用，保证对执行环境有权访问的所有变量和函数的有序访问。

## 闭包

[closures](/Users/xusumu/OneDrive/1.notes/2.FE/Javascript/jsprofessional-wrox.md)

[作用域](/Users/xusumu/OneDrive/1.notes/2.FE/2.thoughtworks/JS/JavaScript-thoughtworks.md)

# 16.  字符串

[字符串类型](/Users/xusumu/OneDrive/1.notes/2.FE/2.thoughtworks/JS/JavaScript-thoughtworks.md)

[字符串介绍(String)](/Users/xusumu/OneDrive/1.notes/2.FE/Javascript/jsprofessional-wrox.md)

# 17. js的数学方法

Math.random() 随机数
Math.abs() 绝对值
Math.max() 最大值
Math.min() 最小值
Math.ceil() 向上取整  1.1
Math.floor() 向下取整
Math.round() 四舍五入
Math.pow(n,m)  幂
Math.sqrt()  开平方
Math.sin() 
Math.cos()
Math.tan()
Math.PI  π

# 18. json对象

- JSON stands for **J**ava**S**cript **O**bject **N**otation
- JSON is a lightweight data-interchange format
- JSON is "self-describing" and easy to understand
- JSON is language independent

JSON uses JavaScript syntax, but the JSON format is text only.
Text can be read and used as a data format by any programming language.

Since the JSON format is text only, it can easily be sent to and from a server, and used as a data format by any programming language.

JavaScript has a built in function to convert a string, written in JSON format, into native JavaScript objects:

`JSON.parse()`

So, if you receive data from a server, in JSON format, you can use it like any other JavaScript object.

[chapter 15. JSON](/Users/xusumu/OneDrive/1.notes/2.FE/2.thoughtworks/JS/JavaScript-thoughtworks.md)

# 19. 定时器

setTimeOut()

Interval()

clearInterval()

clearTimeOut()

new Date()

<mark>substring  substr slice</mark>

# 18. RegExp正则表达式

## Modifiers

Modifiers are used to perform case-insensitive and global searches:

| Modifier                                                | Description                                                  |
| :------------------------------------------------------ | :----------------------------------------------------------- |
| [g](https://www.w3schools.com/jsref/jsref_regexp_g.asp) | Perform a global match (find all matches rather than stopping after the first match) |
| [i](https://www.w3schools.com/jsref/jsref_regexp_i.asp) | Perform case-insensitive matching                            |
| [m](https://www.w3schools.com/jsref/jsref_regexp_m.asp) | Perform multiline matching                                   |

## Brackets

Brackets are used to find a range of characters:

| Expression                                                   | Description                                                 |
| :----------------------------------------------------------- | :---------------------------------------------------------- |
| [[abc\]](https://www.w3schools.com/jsref/jsref_regexp_charset.asp) | Find any character between the brackets                     |
| [[^abc\]](https://www.w3schools.com/jsref/jsref_regexp_charset_not.asp) | Find any character NOT between the brackets                 |
| [[0-9\]](https://www.w3schools.com/jsref/jsref_regexp_0-9.asp) | Find any character between the brackets (any digit)         |
| [[^0-9\]](https://www.w3schools.com/jsref/jsref_regexp_not_0-9.asp) | Find any character NOT between the brackets (any non-digit) |
| [(x\|y)](https://www.w3schools.com/jsref/jsref_regexp_xy.asp) | Find any of the alternatives specified                      |

## Metacharacters

Metacharacters are characters with a special meaning:

| Metacharacter                                                | Description                                                  |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [.](https://www.w3schools.com/jsref/jsref_regexp_dot.asp)    | Find a single character, except newline or line terminator   |
| [\w](https://www.w3schools.com/jsref/jsref_regexp_wordchar.asp) | Find a word character                                        |
| [\W](https://www.w3schools.com/jsref/jsref_regexp_wordchar_non.asp) | Find a non-word character                                    |
| [\d](https://www.w3schools.com/jsref/jsref_regexp_digit.asp) | Find a digit                                                 |
| [\D](https://www.w3schools.com/jsref/jsref_regexp_digit_non.asp) | Find a non-digit character                                   |
| [\s](https://www.w3schools.com/jsref/jsref_regexp_whitespace.asp) | Find a whitespace character                                  |
| [\S](https://www.w3schools.com/jsref/jsref_regexp_whitespace_non.asp) | Find a non-whitespace character                              |
| [\b](https://www.w3schools.com/jsref/jsref_regexp_begin.asp) | Find a match at the beginning/end of a word, beginning like this: \bHI, end like this: HI\b |
| [\B](https://www.w3schools.com/jsref/jsref_regexp_begin_not.asp) | Find a match, but not at the beginning/end of a word         |
| [\0](https://www.w3schools.com/jsref/jsref_regexp_nul.asp)   | Find a NULL character                                        |
| [\n](https://www.w3schools.com/jsref/jsref_regexp_newline.asp) | Find a new line character                                    |
| [\f](https://www.w3schools.com/jsref/jsref_regexp_formfeed.asp) | Find a form feed character                                   |
| [\r](https://www.w3schools.com/jsref/jsref_regexp_carriagereturn.asp) | Find a carriage return character                             |
| [\t](https://www.w3schools.com/jsref/jsref_regexp_tab.asp)   | Find a tab character                                         |
| [\v](https://www.w3schools.com/jsref/jsref_regexp_vtab.asp)  | Find a vertical tab character                                |
| [\xxx](https://www.w3schools.com/jsref/jsref_regexp_octal.asp) | Find the character specified by an octal number xxx;查找以八进制数 xxx 规定的字符。 |
| [\xdd](https://www.w3schools.com/jsref/jsref_regexp_hex.asp) | Find the character specified by a hexadecimal number dd;查找以十六进制数 dd 规定的字符。 |
| [\udddd](https://www.w3schools.com/jsref/jsref_regexp_unicode_hex.asp) | Find the Unicode character specified by a hexadecimal number dddd;查找以十六进制数 dddd 规定的 Unicode 字符。 |

## Quantifiers

| Quantifier                                                   | Description                                                  |
| :----------------------------------------------------------- | :----------------------------------------------------------- |
| [n+](https://www.w3schools.com/jsref/jsref_regexp_onemore.asp) | Matches any string that contains at least one *n*            |
| [n*](https://www.w3schools.com/jsref/jsref_regexp_zeromore.asp) | Matches any string that contains zero or more occurrences of *n* |
| [n?](https://www.w3schools.com/jsref/jsref_regexp_zeroone.asp) | Matches any string that contains zero or one occurrences of *n* |
| [n{X}](https://www.w3schools.com/jsref/jsref_regexp_nx.asp)  | Matches any string that contains a sequence of *X* *n*'s(*X* must be a number.) |
| [n{X,Y}](https://www.w3schools.com/jsref/jsref_regexp_nxy.asp) | Matches any string that contains a sequence of X to Y *n*'s  |
| [n{X,}](https://www.w3schools.com/jsref/jsref_regexp_nxcomma.asp) | Matches any string that contains a sequence of at least X *n*'s |
| [n$](https://www.w3schools.com/jsref/jsref_regexp_ndollar.asp) | Matches any string with *n* at the end of it                 |
| [^n](https://www.w3schools.com/jsref/jsref_regexp_ncaret.asp) | Matches any string with *n* at the beginning of it           |
| [?=n](https://www.w3schools.com/jsref/jsref_regexp_nfollow.asp) | Matches any string that is followed by a specific string *n* |
| [?!n](https://www.w3schools.com/jsref/jsref_regexp_nfollow_not.asp) | Matches any string that is not followed by a specific string *n* |

| Method                                                       | Description                                              |
| :----------------------------------------------------------- | :------------------------------------------------------- |
| [compile()](https://www.w3schools.com/jsref/jsref_regexp_compile.asp) | Deprecated in version 1.5. Compiles a regular expression |
| [exec()](https://www.w3schools.com/jsref/jsref_regexp_exec.asp) | Tests for a match in a string. Returns the first match   |
| [test()](https://www.w3schools.com/jsref/jsref_regexp_test.asp) | Tests for a match in a string. Returns true or false     |
| [toString()](https://www.w3schools.com/jsref/jsref_regexp_tostring.asp) | Returns the string value of the regular expression       |

## RegExp 对象方法

```js
var patt=new RegExp(pattern,modifiers);
//或更简单的方法
var patt=/pattern/modifiers;
```

```js
function findMatches(wordToMatch, cities) {
  return cities.filter(function (place) {
    // here we need to figure out if the city or state matches what was searched
    var regex = new RegExp(wordToMatch, "gi");
    return place.city.match(regex) || place.state.match(regex);
  });
}

//在字符串中不区分大小写找"runoob"
var str = "Visit RUnoob";
var patt1 = /runoob/i;
```

**注意：***当使用构造函数创造正则对象时，需要常规的字符转义规则（在前面加反斜杠 \）。比如，以下是等价的：*

```js
var re = new RegExp("\\w+");
var re = /\w+/;
```

| 方法                                                         | 描述                                                         | FF   | IE   |
| :----------------------------------------------------------- | :----------------------------------------------------------- | :--- | :--- |
| [compile](https://www.w3school.com.cn/js/jsref_regexp_compile.asp) | 编译正则表达式。                                             | 1    | 4    |
| [exec](https://www.w3school.com.cn/js/jsref_exec_regexp.asp) | 检索字符串中指定的值。返回找到的值，并确定其位置.如果没有发现匹配，则返回 null,返回一个结果数组或 [`null`] | 1    | 4    |
| [test](https://www.w3school.com.cn/js/jsref_test_regexp.asp) | 检索字符串中指定的值。返回 true 或 false。                   | 1    | 4    |

```js
//从字符串中搜索字符 "e"
var patt1=new RegExp("e");
document.write(patt1.test("The best things in life are free"));
//true

//检索字符串中指定的值。返回找到的值，并确定其位置。
var patt1=new RegExp("e");
document.write(patt1.exec("The best things in life are free"));
//e

var re = /quick\s(brown).+?(jumps)/ig;
var result = re.exec('The Quick Brown Fox Jumps Over The Lazy Dog');
console.log(result)
//["Quick Brown Fox Jumps","Brown","Jumps"]
```





## 支持正则表达式的 String 对象的方法

| 方法                                                         | 描述                             | FF   | IE   |
| :----------------------------------------------------------- | :------------------------------- | :--- | :--- |
| [search](https://www.w3school.com.cn/jsref/jsref_search.asp) | 检索与正则表达式相匹配的值。     | 1    | 4    |
| [match](https://www.w3school.com.cn/jsref/jsref_match.asp)   | 找到一个或多个正则表达式的匹配。 | 1    | 4    |
| [replace](https://www.w3school.com.cn/jsref/jsref_replace.asp) | 替换与正则表达式匹配的子串。     | 1    | 4    |
| [split](https://www.w3school.com.cn/jsref/jsref_split.asp)   | 把字符串分割为字符串数组。       | 1    | 4    |

```js
var str = "ThE bEst things in lifE arE frEE"
var patt1=new RegExp("e","gi");
var patt2=/is/g;
document.write(str.match(patt1));
//E,E,E,E,E,E

var str = "Visit RUnoob";
var patt2 = new RegExp("runoob","ig");
var patt1 = /runoob/i;
document.write(str.match(patt2));
//RUnoob
```



# 19.     ECMAScript

ECMAScript4 ECMA4  ES4 , ES5 ,ES6
es4 浏览器几乎都支持,后面的ie9以下支持的不行
Ecma国际（Ecma International）是一家国际性会员制度的信息和电信标准组织（标准组织）
ECMAScript-ECMA262

DOM document object model  文档对象模型

[BOM  browser object model  浏览器对象模型](#22. BOM)

# 20. DOM

HTML tag is just opening or closing entity. For example:

`<p> and </p> are called HTML tags`

HTML element encompasses opening tag, closing tag, content (optional for content-less tags) Eg:

`<p>This is the content</p>` : This complete thing is called a HTML element

文档对象模型（DOM，Document Object Model）是 HTML 和 XML 文档的编程接口。DOM 表示由多层节点构成的文档，通过它开发者可以添加、删除和修改页面的各个部分。脱胎于网景和微软早期的动态 HTML（DHTML，Dynamic HTML），DOM 现在是真正跨平台、语言无关的表示和操作网页的方式。

- The HTML elements as **objects**
- The **properties** of all HTML elements
- The **methods** to access all HTML elements
- The **events** for all HTML elements

In other words: **The HTML DOM is a standard for how to get, change, add, or delete HTML elements.**

![](https://www.w3schools.com/js/pic_htmltree.gif)

## Node vs Elemet

以下摘自MDN:

> A Node is an interface from which a number of DOM types inherit, and allows these various types to be treated (or tested) similarly.

> The following interfaces all inherit from Node its methods and properties: Document, Element, CharacterData (which Text, Comment, and CDATASection inherit), ProcessingInstruction, DocumentFragment, DocumentType, Notation, Entity, EntityReference.

## DOM Root Nodes

[dom node](https://www.w3schools.com/jsref/prop_node_nodetype.asp)

There are two special properties that allow access to the full document:

- `document.body` - The body of the document
- `document.documentElement` - The full document

**Tip:** The difference between this property and the [document.body](https://www.w3schools.com/jsref/prop_doc_body.asp) property, is that the document.body element returns the <body> element, while the document.documentElement returns the <html> element.

```html
<html>
<body>

<p>Hello World!</p>
<div>
<p>The DOM is very useful!</p>
<p>This example demonstrates the <b>document.body</b> property.</p>
</div>

<script>
alert(document.body.innerHTML);
</script>

</body>
</html>
```

```html
<html>
<body>

<p>Hello World!</p>
<div>
<p>The DOM is very useful!</p>
<p>This example demonstrates the <b>document.documentElement</b> property.</p>
</div>

<script>
alert(document.documentElement.innerHTML);
</script>

</body>
</html>
```

### The nodeType Property(类型)

The `nodeType` property is read only. It returns the type of a node.html

<mark>所有东西都有一个nodetype属性</mark>

The most important nodeType properties are:

| Node               | Type | Example                                         |
| :----------------- | :--- | :---------------------------------------------- |
| ELEMENT_NODE       | 1    | <h1 class="heading">W3Schools</h1>              |
| ATTRIBUTE_NODE     | 2    | class = "heading" (deprecated)                  |
| TEXT_NODE          | 3    | W3Schools                                       |
| COMMENT_NODE       | 8    | <!-- This is a comment -->                      |
| DOCUMENT_NODE      | 9    | The HTML document itself (the parent of <html>) |
| DOCUMENT_TYPE_NODE | 10   | <!Doctype html>                                 |

| 节点类型 | 描述                      | 子节点                                              |                                                              |
| :------- | :------------------------ | :-------------------------------------------------- | ------------------------------------------------------------ |
| 1        | <mark>Element</mark>      | 代表元素                                            | Element, Text, Comment, ProcessingInstruction, CDATASection, EntityReference |
| 2        | <mark>Attr</mark>         | 代表属性                                            | Text, EntityReference                                        |
| 3        | <mark>Text</mark>         | 代表元素或属性中的文本内容。                        | None                                                         |
| 4        | CDATASection              | 代表文档中的 CDATA 部分（不会由解析器解析的文本）。 | None                                                         |
| 5        | EntityReference           | 代表实体引用。                                      | Element, ProcessingInstruction, Comment, Text, CDATASection, EntityReference |
| 6        | Entity                    | 代表实体。                                          | Element, ProcessingInstruction, Comment, Text, CDATASection, EntityReference |
| 7        | ProcessingInstruction     | 代表处理指令。                                      | None                                                         |
| 8        | <mark>Comment</mark>      | 代表注释。                                          | None                                                         |
| 9        | <mark>Document</mark>     | 代表整个文档（DOM 树的根节点）。                    | Element, ProcessingInstruction, Comment, DocumentType        |
| 10       | <mark>DocumentType</mark> | 向为文档定义的实体提供接口                          | None                                                         |
| 11       | DocumentFragment          | 代表轻量级的 Document 对象，能够容纳文档的某个部分  | Element, ProcessingInstruction, Comment, Text, CDATASection, EntityReference |
| 12       | Notation                  | 代表 DTD 中声明的符号。                             | None                                                         |

```html
获取第一个文本值
 <div id="example">
      1002
      <a>1001</a>
</div>

var hh = document.getElementById("example");
console.log(hh.firstChild.nodeValue.trim())
```



```html
<!DOCTYPE html>
<html>
<body>

<h2 id="hh">JavaScript HTML DOM!</h2>

<p>Hello World!</p>
<p>Hello Norway!</p>
<p id="demo"></p>
<p id="demo1"></p>
<p id="demo2"></p>

<script>
var myNodelist = document.querySelectorAll("p");
var hh = document.getElementById("hh");

//获取ID这种指向性明确的节点直接使用firstChild，lastChild等直接获取子文本内容
document.getElementById("demo").innerHTML =
"The innerHTML of the second paragraph is: " +
hh.firstChild.nodeValue;

//当获取的是节点集合时，需要通过index获取某个节点后再通过firstChild，lastChild等直接获取子文本内容
document.getElementById("demo1").innerHTML =
"The innerHTML of the second paragraph is: " +
myNodelist[1].firstChild.nodeValue;

document.getElementById("demo2").innerHTML =
"The innerHTML of the second paragraph is: " +
myNodelist[1].firstChild.innerHTML;
</script>

</body>
</html>

```

### The nodeName Property

The `nodeName` property specifies the name of a node.

`childNodes[0].nodeValue`

- nodeName is read-only
- nodeName of an element node is the same as the tag name
- nodeName of an attribute node is the attribute name
- nodeName of a text node is always #text
- nodeName of the document node is always #document
- 如果是元素节点,`nodeName`属性和`tagName`属性返回相同的值,但如果是文本节点,`nodeName`属性会返回`"#text"`,而`tagName`属性会返回`undefined`.

```html
<!DOCTYPE html>
<html>
<body>

<p id="id01">My First Page</p>
<p id="id02"></p>

<script>
document.getElementById("id02").innerHTML = document.getElementById("id01").nodeName;
</script>

</body>
</html>

<!DOCTYPE html>
<html>
<body>

<p id="myP">Click the button to get the node name of this element.</p>

<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script>
function myFunction() {
  var x = document.getElementById("myP").firstChild.nodeName;
  //var x = document.getElementById("myP").firstChild.nodeType;
	//var x = document.getElementById("myP").firstChild.nodeValue;
  document.getElementById("demo").innerHTML = x;
}
//output #text
</script>


</body>
</html>
```

### The nodeValue Property

The `nodeValue` property specifies the value of a node.

- nodeValue for element nodes is `null`

  元素节点的nodeValue返回null，因为需要通过`parentNode``childNodes[nodenumber]``firstChild``lastChild``nextSibling``previousSibling`这些方式去获取文本节点

- nodeValue for text nodes is the text itself

- nodeValue for attribute nodes is the attribute value

```html
<!DOCTYPE html>
<html>
<body>

<p>Click the button get the node name, node type and node value of the div's first child.</p>

<div id="myDIV">This is a div element and id is mayDIV.the first child node of div is textnode and its node type is 3</div>
<br>

<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script>
function myFunction() {
  var x = document.getElementById("myDIV").firstChild;
  var txt = "";
  txt += "The node name: " + x.nodeName + "<br>";
  //#text
  txt += "The node value: " + x.nodeValue + "<br>";
  //This is a div element and id is mayDIV.the first child node of div is textnode and its node type is 3
  txt += "The node type: " + x.nodeType;
  //3
  document.getElementById("demo").innerHTML = txt;
}
  
  function myFunction2() {
  var x = document.getElementById("myDIV");
  var txt = "";
  txt += "The node name: " + x.nodeName + "<br>";
  //DIV
  txt += "The node value: " + x.nodeValue + "<br>";
  //null
  txt += "The node type: " + x.nodeType;
  //1
  document.getElementById("demo").innerHTML = txt;
}
</script>

</body>
</html>
```

## Navigating Between Nodes

You can use the following node properties to navigate between nodes with JavaScript:

- `parentNode`
- `childNodes[nodenumber]`
- `firstChild`
- `lastChild`
- `nextSibling`
- `previousSibling`
- previousElementSibling

```html
<!DOCTYPE html>
<html>
<body>

<h1 id="id01">My First Page</h1>
<p id="id02"></p>

<script>
document.getElementById("id02").innerHTML = document.getElementById("id01").firstChild.nodeValue;
//the same
//document.getElementById("id02").innerHTML = document.getElementById("id01").childNodes[0].nodeValue;
</script>

</body>
</html>
```

```html
<!DOCTYPE html>
<html>
<body>


<h1 id="id01">My First Page1</h1>
<h3 id="id02">My First Page3</h3>

<!--div框起来的元素获取兄弟节点时候，不能越出div框外获取，因为那就不是兄弟节点了-->
<div>
<h1 id="id03">My First Page1</h1>
<h3 id="id04">My First Page3</h3>
</div>

<p id="id05"></p>
<p id="id06"></p>


<script>
document.getElementById("id05").innerHTML ="id05:"+ document.getElementById("id01").nextSibling.nextSibling.nextSibling.nextSibling.nodeName;

//output p

document.getElementById("id06").innerHTML ="id06:获取失败" + document.getElementById("id03").nextSibling.nextSibling.nextSibling.nextSibling.nodeName;

</script>

</body>
</html>

```

## Document 类型

| Attribute     | Value     |
| :------------ | :-------- |
| nodeType      | 9         |
| nodeName      | #document |
| nodeValue     | Null      |
| parentNode    | Null      |
| ownerDocument | Null      |

刚才说道 Document 是整个文档的根节点，我们想要访问某个节点的时候都必须通过 document 这个实例对象。

[文档的属性和方法](https://www.w3schools.com/jsref/dom_obj_document.asp)

- document 对象的常用属性：

```js
document.documentElement  // 可以直接拿到 html 节点的引用
document.title //  可以直接获取 title 节点的文本 “我是title”
document.URL // 获取 URL
document.domain
```

- document 对象的常用方法

```js
document.getElementById 
// document.getElementById('myId') 可以获取到属性 id 为 ‘myId’ 的节点，在上面的代码中获取的也就是 p 节点
document.getElementsByTagName 
//document.getElementsByTagName('p') 可以获取到节点为 p 的所有节点集
document.getElementsByClassName
document.getElementsByName
document.querySelector()
document.querySelectorAll()
document.addEventListener()
document.removeEventListener()
document.write()
document.createElementAttribute()
document.createElement()
document.createEvent()
document.createTextNode()
```

- 现在我们就根据 document 对象中的方法获取到 HTML 中任意节点了，下面我们来介绍在已经拿到节点的基础上该如何对该节点进行操作。

## Element 类型

- 通常我们在使用 document 对象来获取节点时，返回的节点类型就是 Element 类型，所以我们想要对获取的节点进行操作，我们只需要使用 Element 包含的属性和方法即可。

- 常用的属性：

```js
var myNode = document.getElementById('myId');
myNode.id // 获取该节点的 id ，即 ‘myId‘
myNode.tagName // 获取该节点的节点名，即 'P'，大部分浏览器返回的标签名都是大写
myNode.className //获取该节点的 class
```

- 操作节点属性的常用方法：

```js
//假如我们有一个 input，我们想要获取 input 的 type 属性，并对 type 属性进行操作
<input type='text' id='input'/>

var myNode = document.getElementById('input')
myNode.getAttribute('type') // 获取属性值，即 ‘text’
myNode.setAttribute('type','password') // 将 type 属性值改为 password 类型
myNode.removeAttribute('type') // 移除 type 属性
```

![Xnip2021-05-07_22-56-41.jpg](http://ww1.sinaimg.cn/large/005NUwyggy1gqa997ci4oj31e00mijvm.jpg)

## Finding HTML Elements

| Method                                  | Description                   |
| :-------------------------------------- | :---------------------------- |
| document.getElementById(*id*)           | Find an element by element id |
| document.getElementsByTagName(*name*)   | Find elements by tag name     |
| document.getElementsByClassName(*name*) | Find elements by class name   |

------

## Changing HTML Elements

| Property                                   | Description                                   |
| :----------------------------------------- | :-------------------------------------------- |
| *element*.innerHTML = *new html content*   | Change the inner HTML of an element           |
| *element*.*attribute = new value*          | Change the attribute value of an HTML element |
| *element*.style.*property = new style*     | Change the style of an HTML element           |
| Method                                     | Description                                   |
| *element*.setAttribute*(attribute, value)* | Change the attribute value of an HTML element |

------

```html
<!DOCTYPE html>
<html>
<body>

<img id="myImage" src="smiley.gif">
<!--*element*.setAttribute*(attribute, value)*-->
<script>
document.getElementById("myImage").src = "landscape.jpg";
</script>

</body>
</html>
```

## Adding and Deleting Elements

| Method                             | Description                                                  |
| :--------------------------------- | :----------------------------------------------------------- |
| document.createElement(*element*)  | Create an HTML element,创建标签必须是document才有权限        |
| document.removeChild(*element*)    | Remove an HTML element                                       |
| document.appendChild(*element*)    | Add an HTML element                                          |
| document.replaceChild(*new, old*)  | Replace an HTML element                                      |
| document.write(*text*)             | Write into the HTML output stream                            |
| insertBefore(*target*,*reference*) | 如果第二个参数是null或者undefined，那么会默认执行appendChild |

```html
<!DOCTYPE html>
<html>
<body>

<div id="div1">
<p id="p1">This is a paragraph.</p>
<p id="p2">This is another paragraph.</p>
</div>

<script>
var para = document.createElement("p");
var node = document.createTextNode("This is new.");
para.appendChild(node);
var element = document.getElementById("div1");
element.appendChild(para);
</script>

</body>
</html>
```

## Adding Events Handlers

| Method                                                      | Description                                                  |
| :---------------------------------------------------------- | :----------------------------------------------------------- |
| document.getElementById(*id*).onclick = function(){*code*}  | Adding event handler code to an onclick event                |
| `<div onclick="xxx"></div>`                                 | html 事件 添加 event,内联添加                                |
| oDiv.onclick=function(){}                                   | 外联文件添加事件函数                                         |
| 元素.addEventListener('不加on的事件名',函数名,是否事件下沉) | DOM2级事件，只兼容高级浏览器，真正工作中，还是有新出的高级事件都要用这种方法添加 |
| 元素.attachEvent('加on的事件名',函数名)                     | ie事件处理方式，兼容ie系列                                   |

```js
//浏览器兼容判断
function addEvent(obj, sEvent, fn) {
  if (obj.addEventListener) {
    obj.addEventListener(sEvent, fn, false);
  } else {
    obj.attactEvent("on" + sEvent, fn);
  }
}
```

## 一些 DOM 对象方法

| 方法                     | 描述                                                         |
| :----------------------- | :----------------------------------------------------------- |
| getElementById()         | 返回带有指定 ID 的元素。                                     |
| getElementsByTagName()   | 返回包含带有指定标签名称的所有元素的节点列表（集合/节点数组）。 |
| getElementsByClassName() | 返回包含带有指定类名的所有元素的节点列表。                   |
| appendChild()            | 把新的子节点添加到指定节点。                                 |
| removeChild()            | 删除子节点。                                                 |
| replaceChild()           | 替换子节点。                                                 |
| insertBefore()           | 在指定的子节点前面插入新的子节点。                           |
| createAttribute()        | 创建属性节点。                                               |
| createElement()          | 创建元素节点。                                               |
| createTextNode()         | 创建文本节点。                                               |
| getAttribute()           | 返回指定的属性值。                                           |
| setAttribute()           | 把指定属性设置或修改为指定的值。                             |
| cloneNode()(true)        | 克隆一个元素                                                 |

```html
<!DOCTYPE html>
<html>
<body>

<div id="div1">
<p id="p1">This is a paragraph.</p>
<p id="p2">This is another paragraph.</p>
</div>

<script>
var para = document.createElement("p");
var node = document.createTextNode("This is new.");
para.appendChild(node);

var element = document.getElementById("div1");
var child = document.getElementById("p1");
element.insertBefore(para,child);
</script>

</body>
</html>
```

```html
<!--The remove() method does not work in older browsers, see the example below on how to use removeChild() instead.-->

<div>
  <p id="p1">This is a paragraph.</p>
  <p id="p2">This is another paragraph.</p>
</div>

<script>
var elmnt = document.getElementById("p1");
elmnt.remove();
</script>


<div id="div1">
  <p id="p1">This is a paragraph.</p>
  <p id="p2">This is another paragraph.</p>
</div>

<script>
var parent = document.getElementById("div1");
var child = document.getElementById("p1");
parent.removeChild(child);
</script>
```

```html
<div id="div1">
  <p id="p1">This is a paragraph.</p>
  <p id="p2">This is another paragraph.</p>
</div>

<script>
var para = document.createElement("p");
var node = document.createTextNode("This is new.");
para.appendChild(node);

var parent = document.getElementById("div1");
var child = document.getElementById("p1");
parent.replaceChild(para, child);
</script>
```

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div index="1">aaaaaaaaaaa</div>
  </body>
</html>
<script>
  // var oDiv=document.querySelector('div');
  // oDiv.setAttribute('web258','aaa')
  // oDiv.removeAttribute('web258')
  // alert(oDiv.getAttribute('index'))
  // alert(oDiv.getAttribute('web258'))

  var oDiv = document.querySelector("div");
  oDiv.setAttribute("web258", "aaa");
  //oDiv.removeAttribute('web258')
  console.log(oDiv.getAttribute("index"));
  console.log(oDiv.getAttribute("web258"));
</script>

```


# 21. 视口的宽高与滚动高度

[Element size and scrolling](https://javascript.info/size-and-scroll)

![geometry.jpg](http://ww1.sinaimg.cn/large/005NUwyggy1gqdn31eqmdj317013qwoj.jpg)

- 可视区的高度
      document.documentElement.clientHeight
      document.documentElement.clientWidth

- 页面的滚动距离
      document.documentElement.scrollTop
      document.documentElement.scrollLeft

  ​	onscroll 当滚动的时候

- 物体的位置信息
      元素.offsetTop 
      元素.offsetLeft

是一个只读属性，返回当前元素*左上角*相对于  [`HTMLElement.offsetParent`](https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/offsetParent) 节点的左边界偏移的像素值。

The offsetLeft property returns the left position (in pixels) relative to the left side the offsetParent element.

<mark>根据定位父级来获取位置，如果没有定位父级根据body</mark>

- 物体的大小信息: 获取内容高度 getComputedStyle

- 元素.offsetWidth
- 元素.offsetHeight
  - 内容+border+padding 是数字

- 元素.scrollHeight
- 元素.scrollWidth
  - 即如果设置overflow:hidden，或内容的确没有超出：内容+padding，

  - 如果内容超出（overflow:auto）：内容+padding+超出的距离

- parentNode 结构的父级,最上面是document，再往上是null

- offsetParent 定位父级,最上面是body，再往上是null

![](https://i.stack.imgur.com/4C3no.png)

```html
<!DOCTYPE html>
<html>
<head>
<style>
body{
}

#test {
  left: 100px;
  margin: 10px;
  padding: 10px;
  width: 300px;
  position: relative;
  border: 5px solid black
}
</style>
</head>
<body id="bbdy">

<div id="test">
  <p>Click the button to get offsetLeft for the test div.</p>
  <p><button onclick="myFunction()">Try it</button></p>
  <p>offsetLeft is: <span id="demo"></span></p>
</div>

<script>
function myFunction() {
  var testDiv = document.getElementById("test");
  //document.getElementById("demo").innerHTML = testDiv.offsetLeft;
  let elem1 = document.getElementById("bbdy");
  document.getElementById("demo").innerHTML = getComputedStyle(elem1).marginLeft;

}
</script>

</body>
</html>

```

# 22. BOM

Browser object model

因为浏览器内核不同，功能基本都不兼容，但也有兼容的功能。

窗位视弹缓导定史

窗外事瘫痪到底是

| BOM对象     |                                                              |
| :---------- | ------------------------------------------------------------ |
| window      | window对象被所有浏览器支持，全局变量，全局函数都是window对象，dom也是window对象。 |
| screen      | The window.screen object contains information about the user's screen. |
| location    | 可以链接新的url地址，或地址重定向                            |
| history     |                                                              |
| navigator   | 对象包含浏览者的浏览器的相关信息                             |
| Popup alert |                                                              |
| timing      |                                                              |
| Cookies     | [cookies](/Users/xusumu/OneDrive/1.notes/2.FE/2.thoughtworks/JS/JavaScript-thoughtworks.md) |

## window

```js
window.document.getElementById("header");
document.getElementById("header");
```

### window size

```js
var w = window.innerWidth
|| document.documentElement.clientWidth
|| document.body.clientWidth;

var h = window.innerHeight
|| document.documentElement.clientHeight
|| document.body.clientHeight;
```

```js
window.open() //- open a new window
window.close() //- close the current window
window.moveTo() //- move the current window
window.resizeTo() // resize the current window
```

## navigator

The `window.navigator` object can be written without the window prefix.

| navigator的属性       | 返回值             |
| :-------------------- | ------------------ |
| navigator.appName     | 返回浏览器的名字   |
| navigator.appCodeName | 返回浏览器的编码名 |
| navigator.paltform    | 返回浏览器的平台   |

## location

| 属性                     | 返回值                                          |
| :----------------------- | ----------------------------------------------- |
| window.location.href     | 返回当前页面的链接                              |
| window.location.hostname | 返回网站主域名                                  |
| window.location.pathname | 返回当前页面的路径和文件名                      |
| window.location.protocol | returns the web protocol used (http: or https:) |
| window.location.assign() | loads a new document,可以赋值新的网址           |

```html
<!DOCTYPE html>
<html>
<body>

<h2>JavaScript</h2>

<h3>The window.location object</h3>

<input type="button" value="Load new document" onclick="newDoc()">

<script>
function newDoc() {
  window.location.assign("https://www.w3schools.com")
}
</script>

</body>
</html>

```

## history

| 属性              | 返回值                                    |
| :---------------- | ----------------------------------------- |
| history.back()    | 后退                                      |
| history.forward() | 前进                                      |
| history.go()      | history.go(1 前进一页；-1后退一页；0刷新) |

## popup alert

| 属性                                         | 返回值                                 |
| :------------------------------------------- | -------------------------------------- |
| window.alert()                               | 确保返回给用户的信息                   |
| window.confirm("*sometext*");                | 让用户确认或接受某些东西               |
| window.prompt("*sometext*","*defaultText*"); | 让用户输入文案，并带有却和和取消的按钮 |

## timing

- setTimeout(function, milliseconds)
- setInterval(function, milliseconds)
- clearTimeout(*timeoutVariable*)
- clearInterval(*timerVariable*)

## 跳转页面的方式

1. `<a href="adress"></a>`
2. window.open(地址,打开方式)       
3. window.location.href='xxx'

## 刷新页面

1. location.reload()
2. history.go(0)
3. `<a href=""></a>`

# 23. 面向对象

[Chapter 6 :Object-Oriented Programming-js高程 ](/Users/xusumu/OneDrive/1.notes/2.FE/Javascript/jsprofessional-wrox.md)

[chapter 18.【重点】面向对象基础-thoughtworks](/Users/xusumu/OneDrive/1.notes/2.FE/2.thoughtworks/JS/JavaScript-thoughtworks.md)

工厂模式，构造模式，原型模式，构造和原型混合模式

# 24. This 指向

| this位置         | this指向                                                     |
| ---------------- | ------------------------------------------------------------ |
| 用在函数外       | this 指向  window                                            |
| 用在普通函数内   | 1、函数直接调用  window<br/>2、在事件内部   触发事件的元素<br/>3、定时器   window<br/>4、对象里面的方法  指向这个方法属于的对象<br/>5、自执行匿名函数  window |
| 用在构造函数里面 | this指向，函数里面创建的空白对象,指向实例                    |
| 用在箭头函数内   | this 指向  window                                            |

# 25. ajax

[chapter 16. [重点] AJAX](/Users/xusumu/OneDrive/1.notes/2.FE/2.thoughtworks/JS/JavaScript-thoughtworks.md)

```js
//jquery 中ajax的使用
$.ajax({
  //url 填写对应的端口号或者链接
  url: "a.txt",
  type: "get",
  data: {
    a: 1,
    b: 2
  },
  success: function success(res) {
    console.log(res);
  }
});
```

```js
$.ajax({
  url: "taobao2.txt",
  success: function success(res) {
    console.log(res); //把字符串的json变成真正的json

    var json = JSON.parse(res);
    console.log(json);
    $.each(json.data, function (i, v) {
      $("#box").append(
        '<div>\
                    <a href="' +
          v.link +
          '">\
                        <img src="' +
          v.src +
          '" alt="">\
                        <p>' +
          v.title +
          "</p>\
                        <p>" +
          v.msg +
          "</p>\
                    </a>\
                </div>"
      );
    });
  }
});
```



# 26. es6 循环

```js
    var arr=['1','2','3','4','5']

    arr.forEach(function(v,i){
        console.log(typeof v)
    })

    // var arr2=arr.map(function(v,i){
    //     console.log(v,i)
    //     return i+v;
    // })
    // console.log(arr2);

    // var arr2=arr.filter(function(v,i){
    //     console.log(v,i)
    //     return i<3;
    // })
    // console.log(arr2);
```

